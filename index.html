<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒêƒÉng nh·∫≠p</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to right, #007bff, #00c6ff);
    color: #333;
    display: flex; justify-content: center; align-items: center;
    height: 100vh;
  }
  .login-box {
    background: #fff;
    padding: 30px 40px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    width: 320px;
  }
  h2 { text-align: center; color: #007bff; }
  input[type="email"], input[type="password"] {
    width: 100%; padding: 10px; margin: 8px 0;
    border: 1px solid #ccc; border-radius: 5px;
  }
  button {
    width: 100%; padding: 10px; background: #007bff;
    color: white; border: none; border-radius: 5px;
    cursor: pointer; font-size: 16px;
  }
  button:hover { background: #0056b3; }
  .bottom {
    display: flex; justify-content: space-between; align-items: center;
    margin-top: 10px;
  }
  label { font-size: 14px; }
  a {
    font-size: 14px; color: #007bff; text-decoration: none;
  }
  a:hover { text-decoration: underline; }
</style>
</head>
<body>
  <div class="login-box">
    <h2>ƒêƒÉng nh·∫≠p</h2>
    <input type="email" id="email" placeholder="Nh·∫≠p email" required>
    <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
    
    <div class="bottom">
      <label><input type="checkbox" id="rememberMe"> Ghi nh·ªõ ƒëƒÉng nh·∫≠p</label>
      <a href="dangky.html">ƒêƒÉng k√Ω</a>
    </div>
    
    <button id="loginBtn">ƒêƒÉng nh·∫≠p</button>
    <p id="status" style="color:red; text-align:center; margin-top:10px;"></p>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script>
  // C·∫•u h√¨nh Firebase c·ªßa b·∫°n
      const firebaseConfig = {
          apiKey: "AIzaSyAb5AZOBvEVY3a_9ioEKTW-wuVMXdnRZGQ",
          authDomain: "sellglass-3ebe9.firebaseapp.com",
          databaseURL: "https://sellglass-3ebe9-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "sellglass-3ebe9",
          storageBucket: "sellglass-3ebe9.appspot.com",
          messagingSenderId: "513741829035",
          appId: "1:513741829035:web:1b2c59dcf1a0be329358ee"
      };
      firebase.initializeApp(firebaseConfig);
      const db = firebase.database();

  const emailInput = document.getElementById("email");
  const passInput = document.getElementById("password");
  const rememberMe = document.getElementById("rememberMe");
  const statusDiv = document.getElementById("status");
  const loginBtn = document.getElementById("loginBtn");

  // N·∫øu tr∆∞·ªõc ƒë√≥ c√≥ l∆∞u th√¥ng tin -> t·ª± ƒë·ªông ƒëi·ªÅn & ƒëƒÉng nh·∫≠p
  window.addEventListener("load", () => {
    const savedEmail = localStorage.getItem("savedEmail");
    const savedPass = localStorage.getItem("savedPass");
    if (savedEmail && savedPass) {
      emailInput.value = savedEmail;
      passInput.value = savedPass;
      rememberMe.checked = true;
     // autoLogin(savedEmail, savedPass);
    }
  });

  loginBtn.addEventListener("click", async () => {
    const email = emailInput.value.trim();
    const pass = passInput.value.trim();

    if (!email || !pass) {
      statusDiv.textContent = "‚ö† Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß Email v√† M·∫≠t kh·∫©u.";
      return;
    }

    try {
      const snap = await db.ref("nhanvien").orderByChild("email").equalTo(email).once("value");
      if (snap.exists()) {
        const userData = Object.values(snap.val())[0];
        if (userData.pass === pass) {
          statusDiv.style.color = "green";
          statusDiv.textContent = "‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng!";
          if (rememberMe.checked) {
            localStorage.setItem("savedEmail", email);
            localStorage.setItem("savedPass", pass);
          } else {
            localStorage.removeItem("savedEmail");
            localStorage.removeItem("savedPass");
          }
          // L∆∞u email ƒë·ªÉ d√πng b√™n trang qu√©t
          sessionStorage.setItem("userEmail", email);
          setTimeout(() => window.location.href = "quet.html", 1000);
        } else {
          statusDiv.textContent = "‚ùå M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!";
        }
      } else {
        statusDiv.textContent = "‚ùå Kh√¥ng t√¨m th·∫•y t√†i kho·∫£n n√†y!";
      }
    } catch (err) {
      statusDiv.textContent = "‚ùå L·ªói ƒëƒÉng nh·∫≠p: " + err;
    }
  });

  // H√†m t·ª± ƒë·ªông ƒëƒÉng nh·∫≠p n·∫øu ƒë√£ l∆∞u
  //async function autoLogin(email, pass) {
  //  try {
  //    const snap = await db.ref("nhanvien").orderByChild("email").equalTo(email).once("value");
  //    if (snap.exists()) {
  //      const userData = Object.values(snap.val())[0];
  //      if (userData.pass === pass) {
  //        statusDiv.style.color = "green";
  //        statusDiv.textContent = "üîÅ T·ª± ƒë·ªông ƒëƒÉng nh·∫≠p...";
  //        localStorage.setItem("userEmail", email);
  //        setTimeout(() => window.location.href = "quet.html", 500);
  //      } else {
  //        localStorage.removeItem("savedEmail");
  //        localStorage.removeItem("savedPass");
  //      }
  //    }
  //  } catch (err) {
  //    console.error("Auto login error:", err);
  //  }
  //}
  </script>
</body>
</html>


