<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÄÄƒng nháº­p nhÃ¢n viÃªn</title>
<style>
body { font-family: Arial; text-align:center; padding:20px; background-color:#f0f2f5; }
input, button { font-size:16px; padding:10px; margin:5px; width:90%; max-width:300px; }
button { cursor:pointer; }
</style>
</head>
<body>

<h1>ğŸ”‘ ÄÄƒng nháº­p nhÃ¢n viÃªn</h1>
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Máº­t kháº©u">
<button id="loginBtn">ÄÄƒng nháº­p</button>
<div id="error" style="color:red; margin-top:10px;"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
  // ================== Firebase config ==================
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);

  const loginBtn = document.getElementById('loginBtn');
  const errorDiv = document.getElementById('error');

  loginBtn.addEventListener('click', function() {
    errorDiv.textContent = '';
    const emailInput = document.getElementById('email').value.trim();
    const passwordInput = document.getElementById('password').value.trim();

    if (!emailInput || !passwordInput) {
      errorDiv.textContent = 'Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ email vÃ  máº­t kháº©u!';
      return;
    }

    // Láº¥y báº£ng nhanvien trong Firebase
    const nhanvienRef = firebase.database().ref('nhanvien');
    nhanvienRef.orderByChild('email').equalTo(emailInput).once('value')
      .then(snapshot => {
        if (!snapshot.exists()) {
          errorDiv.textContent = 'âŒ Email khÃ´ng tá»“n táº¡i!';
          return;
        }

        let valid = false;
        snapshot.forEach(child => {
          const user = child.val();
          if (user.pass === passwordInput) {
            valid = true;
            sessionStorage.setItem('userEmail', emailInput);
            sessionStorage.setItem('userName', user.ten);
            window.location.href = 'quet.html';
          }
        });

        if (!valid) {
          errorDiv.textContent = 'âŒ Máº­t kháº©u khÃ´ng Ä‘Ãºng!';
        }
      })
      .catch(err => {
        console.error('âŒ Lá»—i Firebase:', err);
        errorDiv.textContent = 'âŒ Lá»—i truy váº¥n Firebase!';
      });
  });
</script>

</body>
</html>
