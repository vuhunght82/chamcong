<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Đăng ký nhân viên</title>
<style>
  body { font-family: Arial; text-align: center; padding: 20px; background: #f0f2f5; }
  h2 { color: #007bff; }
  input, button { padding: 8px; margin: 5px; font-size: 16px; }
  #error { color: red; margin-top: 10px; }
  #success { color: green; margin-top: 10px; }
</style>
</head>
<body>

<h2>Đăng ký nhân viên</h2>
<input type="text" id="ten" placeholder="Tên nhân viên"><br>
<input type="email" id="email" placeholder="Email"><br>
<input type="password" id="pass" placeholder="Mật khẩu"><br>
<button id="registerBtn">Đăng ký</button>

<div id="error"></div>
<div id="success"></div>
<br>
<a href="index.html">← Quay về trang đăng nhập</a>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAb5AZOBvEVY3a_9ioEKTW-wuVMXdnRZGQ",
  authDomain: "sellglass-3ebe9.firebaseapp.com",
  databaseURL: "https://sellglass-3ebe9-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "sellglass-3ebe9",
  storageBucket: "sellglass-3ebe9.appspot.com",
  messagingSenderId: "513741829035",
  appId: "1:513741829035:web:1b2c59dcf1a0be329358ee"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

document.getElementById('registerBtn').addEventListener('click', () => {
  const ten = document.getElementById('ten').value.trim();
  const email = document.getElementById('email').value.trim();
  const pass = document.getElementById('pass').value.trim();
  const errorDiv = document.getElementById('error');
  const successDiv = document.getElementById('success');

  errorDiv.textContent = '';
  successDiv.textContent = '';

  if (!ten || !email || !pass) {
    errorDiv.textContent = 'Vui lòng điền đầy đủ thông tin.';
    return;
  }

  if (pass.length < 6) {
    errorDiv.textContent = 'Mật khẩu phải ít nhất 6 ký tự.';
    return;
  }

  // Kiểm tra email đã tồn tại chưa
  db.ref('nhanvien').orderByChild('email').equalTo(email).once('value', snapshot => {
    if (snapshot.exists()) {
      errorDiv.textContent = 'Email này đã đăng ký trước đó.';
      return;
    }

    // Thêm nhân viên mới
    const newRef = db.ref('nhanvien').push();
    newRef.set({ ten, email, pass })
      .then(() => {
        successDiv.textContent = '✅ Đăng ký thành công! Bạn có thể quay về trang đăng nhập.';
        document.getElementById('ten').value = '';
        document.getElementById('email').value = '';
        document.getElementById('pass').value = '';
      })
      .catch(err => {
        errorDiv.textContent = '❌ Lỗi lưu dữ liệu: ' + err;
      });
  });
});
</script>

</body>
</html>

