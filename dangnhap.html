<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Đăng nhập nhân viên</title>
</head>
<body>
<h2>Đăng nhập nhân viên</h2>
<input type="email" id="email" placeholder="Email"><br>
<input type="password" id="pass" placeholder="Mật khẩu"><br>
<button id="loginBtn">Đăng nhập</button>
<div id="error" style="color:red"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAb5AZOBvEVY3a_9ioEKTW-wuVMXdnRZGQ",
  authDomain: "sellglass-3ebe9.firebaseapp.com",
  databaseURL: "https://sellglass-3ebe9-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "sellglass-3ebe9",
  storageBucket: "sellglass-3ebe9.appspot.com",
  messagingSenderId: "513741829035",
  appId: "1:513741829035:web:1b2c59dcf1a0be329358ee"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

document.getElementById('loginBtn').addEventListener('click', () => {
  const email = document.getElementById('email').value.trim();
  const pass = document.getElementById('pass').value.trim();

  if(!email || !pass) {
    document.getElementById('error').textContent = 'Vui lòng nhập đầy đủ email và mật khẩu';
    return;
  }

  // Lấy danh sách nhân viên
  db.ref('nhanvien').once('value', snapshot => {
    const data = snapshot.val();
    let found = false;
    for (let key in data) {
      if(data[key].email === email && data[key].pass === pass) {
        found = true;
        sessionStorage.setItem('userEmail', email); // lưu session
        window.location.href = 'quet.html'; // chuyển sang trang quét QR
        break;
      }
    }
    if(!found) {
      document.getElementById('error').textContent = 'Email hoặc mật khẩu không đúng';
    }
  });
});
</script>
</body>
</html>
