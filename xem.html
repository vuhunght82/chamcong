<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Xem th·ªùi gian l√†m</title>
</head>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
  // C·∫•u h√¨nh Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyAb5AZOBvEVY3a_9ioEKTW-wuVMXdnRZGQ",
    authDomain: "sellglass-3ebe9.firebaseapp.com",
    databaseURL: "https://sellglass-3ebe9-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "sellglass-3ebe9",
    storageBucket: "sellglass-3ebe9.appspot.com",
    messagingSenderId: "513741829035",
    appId: "1:513741829035:web:1b2c59dcf1a0be329358ee"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }

  const db = firebase.database();
  const auth = firebase.auth();

  window.db = db;   // cho c√°c file kh√°c d√πng
  window.auth = auth;
</script>
<body>
  <h2>üïí L·ªãch s·ª≠ ch·∫•m c√¥ng</h2>
  <div id="list"></div>
  <p><a href="quet.html">‚Üê Quay l·∫°i ch·∫•m c√¥ng</a></p>

  <script type="module">
   

    const userEmail = sessionStorage.getItem('userEmail');
    if (!userEmail) window.location.href = 'index.html';

    const dbPath = `chamcong/${userEmail.replace(/\./g, "_")}`;
    const listDiv = document.getElementById('list');

    onValue(ref(db, dbPath), snapshot => {
      listDiv.innerHTML = '';
      if (!snapshot.exists()) {
        listDiv.textContent = 'Ch∆∞a c√≥ d·ªØ li·ªáu ch·∫•m c√¥ng.';
        return;
      }

      const data = snapshot.val();
      Object.keys(data).forEach(date => {
        const d = data[date];
        listDiv.innerHTML += `<div>üìÖ ${date}: ${d.giolamtrongngay} - ${d.noidungmaquet}</div>`;
      });
    });
  </script>
</body>
</html>

